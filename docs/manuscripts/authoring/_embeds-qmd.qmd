::: callout-note
## Embedding Quarto Notebooks

This section covers embedding outputs from Quarto documents (`.qmd`). You can also [embed outputs from Jupyter Notebooks (`.ipynb`)](/docs/authoring/notebook-embed.qmd).

:::

An alternative to including computations directly in the article notebook, is to embed output from other notebooks. This manuscript project includes the notebook `explore-earthquakes.qmd` in the `notebooks/` folder.

To embed output from a notebook, you can use the `embed` shortcode. Quarto shortcodes are special markdown directives that generate content. The `embed` shortcode is used in `{{< meta tool.article-file >}}` in the line:

``` {.markdown shortcodes="false"}
{{< embed notebooks/explore-earthquakes.qmd#fig-spatial-plot >}}
```

The double curly braces (`{{`) and angle brackets (`<`) indicate this is a shortcode. The `embed` shortcode requires a path to a notebook chunk. In this case, it's the file path to a source notebook, `explore-earthquakes.qmd`, followed by `#` and a chunk label. The chunk label is set using the Quarto chunk option `label` in `explore-earthquakes.qmd` notebook:

````{.qmd filename="explore-earthquakes.qmd"}
```{{r}}
#| label: fig-spatial-plot
#| fig-cap: "Locations of earthquakes on La Palma since 2017"
#| fig-alt: "A scatterplot of earthquake locations plotting latitude 
#|   against longitude."
la_palma |> 
  ggplot(aes(Longitude, Latitude)) +
  geom_point(aes(color = Magnitude, size = 40-`Depth(km)`)) +
  scale_color_viridis_c(direction = -1) + 
  scale_size(range = c(0.5, 2), guide = "none") +
  theme_bw()
```
````

Just like any figure, using a label starting with `fig-` allows it to be cross referenced in the text. Any other options, like the figure caption (`fig-cap`) and alt text (`fig-alt`), can also be set in the source notebook.

Whenever you change the content of `explore-earthquakes.qmd`, including updating chunk options like the caption, it will be re-rendered. 
Consequently, the code in `explore-earthquakes.qmd` will also be re-run.
To re-run the code in this notebook, you'll need to have the tidyverse package: 

``` r
install.packages("tidyverse")
```

For example, if you edit the caption to:

```{.r filename="explore-earthquakes.qmd"}
#| fig-cap: "Earthquakes on La Palma since 2017."
```

You'll notice in the background `quarto preview` re-renders the file:
```{.bash filename="Terminal"}
processing file: explore-earthquakes.qmd
                                                                                    output file: explore-earthquakes.knit.md

Rendering output notebook [notebooks/explore-earthquakes.qmd]
Rendering HTML preview [notebooks/explore-earthquakes.qmd]
```

And then the caption updates in the main article preview.
